#!/bin/bash

docker network create rbchallenge \

docker container run \
  --rm \
  --name postgres \
  -d \
  -e POSTGRES_USER=rebase \
  -e POSTGRES_PASSWORD=rebase \
  --network rbchallenge \
  postgres:14.4 \

docker container run \
  -ti\
  --rm \
  --name app \
  --network rbchallenge \
  -w /app \
  -v $(pwd):/app \
  -p 3000:3000 \
  ruby:3.1.2 \
  bash -c "bundle install && rake db:drop && rake db:create && rake db:migrate && rake db:test:prepare && rake db:populate && ruby server.rb"